<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiscal Patriots | Government Spending & Audit Literacy</title>
    <meta name="description" content="Explore federal financial assistance data and understand oversight signals. A neutral, educational resource.">
    <style>
        /* DESIGN SYSTEM - USAFacts Inspired */
        :root {
            /* Palette */
            --color-white: #FFFFFF;
            --color-black: #000000;
            --color-text-primary: #121212;
            --color-text-secondary: #595959;
            --color-bg-light: #F7F7F7;
            --color-accent: #E1197A; /* Magenta */
            --color-border: #E0E0E0;
            --color-link: #121212;
            --color-footer-bg: #121212;
            --color-footer-text: #FFFFFF;
            
            /* Tints */
            --color-accent-tint: #FFF0F7;
            --color-info-tint: #F0F9FF;
            --color-info-border: #BCE3EB;

            /* Spacing Scale */
            --space-xs: 4px;
            --space-s: 8px;
            --space-m: 16px;
            --space-l: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;
            --space-3xl: 64px;
            --space-4xl: 96px;

            /* Typography */
            --font-stack: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --font-display: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            
            --text-base: 1.125rem; /* ~18px */
            --text-sm: 0.95rem;
            --text-h1: 3rem;
            --text-h2: 2.25rem;
            --text-h3: 1.5rem;
            --line-height-body: 1.6;
        }

        /* RESET & BASE */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-stack);
            background-color: var(--color-white);
            color: var(--color-text-primary);
            line-height: var(--line-height-body);
            font-size: var(--text-base);
            -webkit-font-smoothing: antialiased;
        }

        h1, h2, h3, h4 {
            font-family: var(--font-display);
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: var(--space-m);
        }
        h1 { font-size: var(--text-h1); letter-spacing: -0.02em; }
        h2 { font-size: var(--text-h2); letter-spacing: -0.01em; }
        h3 { font-size: var(--text-h3); }
        h4 { font-size: 1.25rem; }
        h5 { font-size: 1.1rem; font-weight: 700; margin-bottom: var(--space-s); }

        p { margin-bottom: var(--space-m); color: var(--color-text-secondary); }
        ul { list-style: none; margin-bottom: var(--space-m); }
        
        a {
            color: var(--color-link);
            text-decoration: none;
            border-bottom: 1px solid var(--color-border);
            transition: all 0.2s ease;
        }
        a:hover { color: var(--color-accent); border-bottom-color: var(--color-accent); }
        a[target="_blank"]::after { content: " ‚Üó"; font-size: 0.7em; vertical-align: top; display: inline-block; margin-left: 2px; }
        
        a:focus, button:focus, input:focus, summary:focus {
            outline: 2px solid var(--color-accent);
            outline-offset: 2px;
        }

        /* UTILITIES */
        .container { max-width: 90rem; margin: 0 auto; padding: 0 var(--space-l); }
        .section { padding: var(--space-3xl) 0; border-bottom: 1px solid var(--color-border); }
        .bg-light { background-color: var(--color-bg-light); }
        .text-center { text-align: center; }
        .bold { font-weight: 700; color: var(--color-text-primary); }
        .mt-l { margin-top: var(--space-l); }

        /* HEADER */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: var(--color-white);
            border-top: 8px solid var(--color-accent);
            border-bottom: 1px solid var(--color-border);
        }
        .nav-wrapper { display: flex; justify-content: space-between; align-items: center; height: 80px; }
        .brand { font-size: 1.5rem; font-weight: 800; letter-spacing: -0.03em; color: var(--color-text-primary); border: none; text-transform: uppercase; }
        .brand:hover { color: var(--color-accent); border: none; }
        .nav-links { display: flex; gap: var(--space-l); }
        .nav-links a { font-weight: 600; font-size: 0.95rem; border: none; color: var(--color-text-primary); }
        .nav-links a:hover { color: var(--color-accent); }
        .search-stub { display: flex; align-items: center; background: var(--color-bg-light); padding: 8px 16px; border-radius: 99px; width: 250px; }
        .search-stub input { border: none; background: transparent; font-size: 0.9rem; width: 100%; outline: none; color: var(--color-text-primary); }
        .mobile-toggle { display: none; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--color-text-primary); }

        @media (max-width: 1024px) {
            .nav-links, .search-stub { display: none; }
            .mobile-toggle { display: block; }
            .nav-links.mobile-active {
                display: flex; position: absolute; top: 80px; left: 0; right: 0;
                flex-direction: column; background: white; padding: var(--space-l);
                border-bottom: 1px solid var(--color-border); gap: var(--space-m); box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            }
        }

        /* LANDING & HERO */
        .hero-question { max-width: 50rem; margin: var(--space-2xl) auto var(--space-l); text-align: center; }
        .hero-answer { max-width: 46rem; margin: 0 auto var(--space-l); text-align: center; font-size: 1.35rem; color: var(--color-text-primary); }
        
        .cta-button {
            display: inline-block; background-color: var(--color-accent); color: white;
            padding: 12px 32px; border-radius: 4px; font-weight: 700; border: none;
            font-size: 1rem; transition: background 0.2s; cursor: pointer;
        }
        .cta-button:hover { background-color: #be1567; color: white; border: none; }
        .btn-secondary { background: white; color: var(--color-text-primary); border: 1px solid var(--color-border); margin-left: 8px; }
        .btn-secondary:hover { background: var(--color-bg-light); color: var(--color-accent); border-color: var(--color-accent); }

        /* Scope Callout */
        .scope-callout {
            max-width: 800px; margin: var(--space-l) auto; padding: var(--space-l);
            background: var(--color-info-tint); border: 1px solid var(--color-info-border);
            border-radius: 8px;
        }
        .scope-callout ul { display: flex; flex-wrap: wrap; gap: var(--space-m); justify-content: center; margin: 0; }
        .scope-callout li { font-size: 0.95rem; color: #004E64; position: relative; padding-left: 14px; }
        .scope-callout li::before { content: "‚Ä¢"; position: absolute; left: 0; color: var(--color-accent); }

        /* Value Cards */
        .value-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-l); margin: var(--space-xl) 0; }
        .value-card { background: white; padding: var(--space-l); border: 1px solid var(--color-border); text-align: center; }
        .value-card h4 { margin-bottom: var(--space-s); color: var(--color-accent); }
        
        /* Big Numbers */
        .stat-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-l); margin: var(--space-xl) 0; }
        .stat-card { background: white; border: 1px solid var(--color-border); padding: var(--space-l); text-align: center; transition: transform 0.2s; }
        .stat-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .stat-number { display: block; font-size: 3.5rem; font-weight: 800; line-height: 1; margin-bottom: var(--space-s); }
        .stat-label { font-size: 1rem; font-weight: 600; display: block; margin-bottom: var(--space-s); }
        .stat-source { font-size: 0.85rem; color: var(--color-text-secondary); border-top: 1px solid var(--color-border); padding-top: var(--space-s); display: block; }

        /* Guided Path */
        .guided-path { margin-top: var(--space-xl); background: white; padding: var(--space-l); border: 1px solid var(--color-border); border-radius: 8px; }
        .path-steps { display: flex; justify-content: space-between; gap: var(--space-m); flex-wrap: wrap; text-align: center; }
        .path-step { flex: 1; min-width: 200px; }
        .path-num { display: inline-block; width: 32px; height: 32px; background: var(--color-accent); color: white; border-radius: 50%; line-height: 32px; font-weight: 700; margin-bottom: var(--space-s); }

        @media (max-width: 768px) {
            .value-grid, .stat-grid, .path-steps { grid-template-columns: 1fr; flex-direction: column; }
            .stat-number { font-size: 2.5rem; }
        }

        /* EXPLORE & VIZ CARDS */
        .viz-card { background: white; border: 1px solid var(--color-border); padding: var(--space-l); margin-bottom: var(--space-xl); }
        .viz-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--space-m); flex-wrap: wrap; gap: var(--space-m); }
        .viz-desc { font-size: 0.95rem; margin-bottom: var(--space-s); color: var(--color-text-primary); }
        .viz-why { font-size: 0.95rem; margin-bottom: var(--space-m); color: var(--color-text-secondary); font-style: italic; }
        
        .viz-chips { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: var(--space-m); }
        .viz-chip { padding: 4px 12px; background: #f0f0f0; border-radius: 99px; font-size: 0.85rem; cursor: pointer; border: 1px solid transparent; transition: all 0.1s; }
        .viz-chip:hover { border-color: var(--color-accent); color: var(--color-accent); }
        .viz-hint { display: none; font-size: 0.9rem; background: var(--color-accent-tint); padding: 8px; border-radius: 4px; margin-bottom: var(--space-m); color: #990055; }

        .chart-placeholder-box { background: var(--color-bg-light); height: 400px; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--color-text-secondary); border: 2px dashed #ccc; border-radius: 8px; margin-bottom: var(--space-m); }
        .guardrail { font-size: 0.8rem; color: #666; text-align: right; }

        /* DATASETS */
        .dataset-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--space-l); margin-bottom: var(--space-xl); }
        .dataset-card { background: white; border: 1px solid var(--color-border); padding: var(--space-l); border-top: 4px solid var(--color-accent); display: flex; flex-direction: column; }
        .dataset-card h4 { color: var(--color-text-primary); margin-bottom: var(--space-s); }
        .dataset-list { padding-left: 20px; font-size: 0.9rem; color: var(--color-text-secondary); list-style: disc; flex-grow: 1; }
        .dataset-pitfall { font-size: 0.85rem; background: #FFF5F5; padding: 8px; border-radius: 4px; color: #8B2C2C; margin-bottom: var(--space-m); }
        
        .connection-block { background: #EAF4F4; border: 1px solid #C4E4E4; padding: var(--space-l); border-radius: 4px; text-align: center; }
        .join-diagram { font-family: monospace; background: white; padding: 8px; border-radius: 4px; display: inline-block; margin: 8px 0; border: 1px solid #ccc; }

        /* GLOSSARY */
        .glossary-controls { margin-bottom: var(--space-l); }
        .glossary-search { width: 100%; padding: 12px; font-size: 1rem; border: 1px solid var(--color-border); border-radius: 4px; margin-bottom: var(--space-m); }
        .glossary-chips { display: flex; flex-wrap: wrap; gap: 8px; }
        .glossary-chip { padding: 6px 14px; background: #f0f0f0; border-radius: 99px; font-size: 0.9rem; cursor: pointer; border: 1px solid transparent; transition: all 0.2s; }
        .glossary-chip.active { background: var(--color-accent); color: white; }
        
        .term-card { background: white; border: 1px solid var(--color-border); margin-bottom: var(--space-s); border-radius: 4px; overflow: hidden; }
        .term-header { padding: 12px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: #fff; transition: background 0.1s; }
        .term-header:hover { background: var(--color-bg-light); }
        .term-title { font-weight: 700; font-size: 1.05rem; }
        .term-cat { font-size: 0.75rem; text-transform: uppercase; background: #eee; padding: 2px 6px; border-radius: 4px; color: #555; }
        .term-body { padding: 0 16px 16px 16px; display: none; border-top: 1px solid #f0f0f0; margin-top: 8px; }
        .term-card.open .term-body { display: block; }
        .term-def { margin-top: 12px; font-size: 0.95rem; line-height: 1.5; }
        .term-why { margin-top: 8px; font-size: 0.9rem; color: var(--color-text-secondary); font-style: italic; background: var(--color-bg-light); padding: 8px; border-radius: 4px; }

        /* CASE STUDIES */
        .case-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: var(--space-l); }
        .case-card { border: 1px solid var(--color-border); padding: var(--space-l); background: white; }
        .case-subhead { font-size: 0.85rem; font-weight: 700; text-transform: uppercase; color: var(--color-text-secondary); margin-top: var(--space-m); margin-bottom: 4px; }
        .case-disclaimer { margin-top: var(--space-m); padding-top: var(--space-m); border-top: 1px solid #eee; font-size: 0.8rem; color: #777; font-style: italic; }

        /* NEXT STEPS */
        .next-steps-grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-xl); background: white; padding: var(--space-xl); border: 1px solid var(--color-border); }
        .next-step-list li { margin-bottom: 10px; padding-left: 20px; position: relative; font-size: 0.95rem; }
        .next-step-list li::before { content: "‚Ä¢"; position: absolute; left: 0; color: var(--color-accent); }
        .resource-list a { display: block; margin-bottom: 8px; }

        /* ABOUT & ARTIFACTS */
        .about-grid { display: grid; grid-template-columns: 2fr 1fr; gap: var(--space-xl); margin-top: var(--space-l); }
        .artifact-btn { display: inline-block; padding: 8px 16px; background: white; border: 1px solid var(--color-border); font-size: 0.9rem; color: var(--color-text-primary); border-radius: 4px; margin: 0 8px 8px 0; }
        .artifact-btn:hover { border-color: var(--color-accent); color: var(--color-accent); }

        /* FOOTER */
        footer { background-color: var(--color-footer-bg); color: var(--color-footer-text); padding: var(--space-3xl) 0; margin-top: var(--space-4xl); }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-2xl); margin-bottom: var(--space-2xl); }
        .footer-col h5 { color: white; margin-bottom: var(--space-m); }
        .footer-col a { color: #AAA; display: block; margin-bottom: 8px; border: none; font-size: 0.95rem; }
        .footer-col a:hover { color: var(--color-accent); }
        .disclaimer { border-top: 1px solid #333; padding-top: var(--space-l); color: #666; font-size: 0.85rem; text-align: center; }

        /* CHATBOT UI */
        .chat-btn { position: fixed; bottom: 24px; right: 24px; width: 60px; height: 60px; background: var(--color-accent); color: white; border-radius: 50%; border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.2); cursor: pointer; font-size: 24px; z-index: 2000; display: flex; align-items: center; justify-content: center; }
        .chat-panel { position: fixed; bottom: 100px; right: 24px; width: 360px; height: 500px; background: white; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.15); border: 1px solid var(--color-border); display: none; flex-direction: column; z-index: 2000; overflow: hidden; }
        .chat-panel.open { display: flex; }
        .chat-header { background: var(--color-accent); color: white; padding: 16px; font-weight: 700; display: flex; justify-content: space-between; }
        .chat-body { flex: 1; padding: 16px; overflow-y: auto; background: #f9f9f9; display: flex; flex-direction: column; gap: 12px; }
        .chat-msg { padding: 10px 14px; border-radius: 12px; max-width: 85%; font-size: 0.9rem; line-height: 1.4; }
        .chat-msg.bot { background: white; border: 1px solid #eee; align-self: flex-start; border-bottom-left-radius: 2px; }
        .chat-msg.user { background: var(--color-accent); color: white; align-self: flex-end; border-bottom-right-radius: 2px; }
        .chat-chips { display: flex; flex-wrap: wrap; gap: 6px; padding: 10px 16px; background: white; border-top: 1px solid #eee; }
        .chat-chip { font-size: 0.8rem; padding: 6px 10px; border: 1px solid var(--color-accent); color: var(--color-accent); border-radius: 12px; cursor: pointer; background: white; }
        .chat-chip:hover { background: var(--color-accent-tint); }
        .chat-input-area { padding: 12px; background: white; border-top: 1px solid #eee; display: flex; gap: 8px; }
        .chat-input-area input { flex: 1; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }

    </style>
</head>
<body>

    <!-- HEADER -->
    <header>
        <div class="container nav-wrapper">
            <a href="#" class="brand">Fiscal Patriots</a>
            <button class="mobile-toggle" onclick="toggleMenu()" aria-label="Toggle Navigation">‚ò∞</button>
            <nav class="nav-links" id="navLinks">
                <a href="#explore">Explore</a>
                <a href="#learn">Learn</a>
                <a href="#datasets">Datasets</a>
                <a href="#case-studies">Cases</a>
                <a href="#next-steps">Next Steps</a>
                <a href="#sources">Sources</a>
                <a href="#about">About</a>
            </nav>
            <div class="search-stub">
                <span style="margin-right:8px; opacity: 0.5;">üîç</span>
                <input type="text" id="headerSearchInput" placeholder="Search glossary..." onkeypress="handleHeaderSearch(event)">
            </div>
        </div>
    </header>

    <!-- SECTION 1: LANDING / START HERE -->
    <section id="landing" class="section" style="padding-top: var(--space-xl);">
        <div class="container">
            <div class="hero-question">
                <h1>Make government spending data understandable.</h1>
            </div>
            <div class="hero-answer">
                <p>Explore federal financial assistance flows and learn how audit signals can inform oversight conversations.</p>
                <div style="margin-top: var(--space-l);">
                    <a href="#explore" class="cta-button">Explore visualizations</a>
                    <a href="#learn" class="cta-button btn-secondary">Learn key terms</a>
                </div>
            </div>

            <!-- 1) Scope and Interpretation Note -->
            <div class="scope-callout">
                <div class="bold text-center" style="margin-bottom:8px;">SCOPE & CONTEXT</div>
                <ul>
                    <li><strong>Focus:</strong> USAspending financial assistance (grants/assistance awards).</li>
                    <li><strong>Not included:</strong> Contract procurement spending.</li>
                    <li><strong>Context:</strong> Large agency totals can reflect entitlements vs. discretionary spending.</li>
                    <li><strong>Audit findings</strong> are signals, not proof of fraud.</li>
                </ul>
            </div>

            <!-- 2) Value Proposition Cards -->
            <div class="value-grid">
                <div class="value-card">
                    <h4>Where assistance flows</h4>
                    <p style="font-size:0.95rem;">Visualize spending by state, agency, and recipient type over time.</p>
                </div>
                <div class="value-card">
                    <h4>What audits signal</h4>
                    <p style="font-size:0.95rem;">Understand findings, internal controls, and repeat issues.</p>
                </div>
                <div class="value-card">
                    <h4>How to interpret</h4>
                    <p style="font-size:0.95rem;">Learn the limitations, nuances, and next steps for inquiry.</p>
                </div>
            </div>

            <!-- Big Number Cards (Existing) -->
            <div class="stat-grid">
                <div class="stat-card">
                    <span class="stat-number">1.1T</span>
                    <span class="stat-label">Dollars Obligated (FY24 Est.)</span>
                    <span class="stat-source">Source: <a href="https://www.usaspending.gov/" target="_blank" rel="noopener noreferrer">USAspending.gov</a></span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">40k+</span>
                    <span class="stat-label">Audit Reports Analyzed</span>
                    <span class="stat-source">Source: <a href="https://www.fac.gov/" target="_blank" rel="noopener noreferrer">FAC</a></span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">3</span>
                    <span class="stat-label">Datasets Connected</span>
                    <span class="stat-source">USAspending + FAC + SAM</span>
                </div>
            </div>

            <!-- 3) Start Here in 60 Seconds -->
            <div class="guided-path">
                <h4 class="text-center" style="margin-bottom: var(--space-l);">Start here in 60 seconds</h4>
                <div class="path-steps">
                    <div class="path-step">
                        <span class="path-num">1</span>
                        <p>Explore the <strong>State View</strong> to see where money goes.</p>
                    </div>
                    <div class="path-step">
                        <span class="path-num">2</span>
                        <p>Switch to <strong>Agencies</strong> to see who is funding it.</p>
                    </div>
                    <div class="path-step">
                        <span class="path-num">3</span>
                        <p>Check <strong>Audit Signals</strong> for flags like material weaknesses.</p>
                    </div>
                    <div class="path-step">
                        <span class="path-num">4</span>
                        <p>Use the <strong>Glossary</strong> to interpret what you find.</p>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- SECTION 2: EXPLORE THE DATA -->
    <section id="explore" class="section bg-light">
        <div class="container">
            <h2 class="text-center">Explore the Data</h2>
            <p class="text-center" style="max-width: 600px; margin: 0 auto var(--space-xl);">
                Interactive visualizations to help you navigate spending and oversight signals.
            </p>

            <!-- VIZ A: STATE -->
            <div class="viz-card">
                <div class="viz-header">
                    <div>
                        <h4>A) Financial Assistance by State</h4>
                        <p class="viz-desc">Total obligation amounts aggregated by recipient state.</p>
                    </div>
                    <p class="viz-why">Why it matters: Helps identify geographic concentrations of federal funding.</p>
                </div>
                <div class="viz-chips">
                    <span class="viz-chip" onclick="showHint(this, 'High funding in low pop states may indicate specific large programs.')">Try: Compare per capita</span>
                    <span class="viz-chip" onclick="showHint(this, 'Filter to see how distributions change year over year.')">Try: Filter by Year</span>
                    <span class="viz-chip" onclick="showHint(this, 'Click a state to isolate top recipients there.')">Try: Isolate top recipients</span>
                </div>
                <div class="viz-hint"></div>
                <div class="chart-placeholder-box">
                    <span>[TABLEAU_VIZ_A_URL]</span>
                    <p>Paste Tableau URL here</p>
                    <a href="#" class="cta-button" style="margin-top:16px;">Open in Tableau</a>
                </div>
                <p class="guardrail">Interpretation guardrail: Population size affects totals. High spending does not imply inefficiency.</p>
            </div>

            <!-- VIZ B: TIME -->
            <div class="viz-card">
                <div class="viz-header">
                    <div>
                        <h4>B) Financial Assistance Over Time (FY2019‚Äì2024)</h4>
                        <p class="viz-desc">Trends in spending obligations across recent fiscal years.</p>
                    </div>
                    <p class="viz-why">Why it matters: Reveals spikes (e.g., pandemic relief) or programmatic cuts.</p>
                </div>
                <div class="viz-chips">
                    <span class="viz-chip" onclick="showHint(this, '2020/2021 often show massive spikes due to COVID-19 relief.')">Try: Spot the COVID spike</span>
                    <span class="viz-chip" onclick="showHint(this, 'Check if levels have returned to 2019 baseline.')">Try: Compare 2019 vs 2024</span>
                    <span class="viz-chip" onclick="showHint(this, 'See which agencies drove the changes.')">Try: Filter by Agency</span>
                </div>
                <div class="viz-hint"></div>
                <div class="chart-placeholder-box">
                    <span>[TABLEAU_VIZ_B_URL]</span>
                    <p>Paste Tableau URL here</p>
                </div>
                <p class="guardrail">Interpretation guardrail: Adjust for inflation when comparing long periods.</p>
            </div>

            <!-- VIZ C: AGENCIES -->
            <div class="viz-card">
                <div class="viz-header">
                    <div>
                        <h4>C) Top Agencies by Assistance Volume</h4>
                        <p class="viz-desc">A concentration view of which agencies obligate the most funds.</p>
                    </div>
                    <p class="viz-why">Why it matters: Shows that a few agencies (like HHS) often manage the majority of assistance dollars.</p>
                </div>
                <div class="viz-chips">
                    <span class="viz-chip" onclick="showHint(this, 'HHS usually leads due to Medicare/Medicaid.')">Try: Find HHS</span>
                    <span class="viz-chip" onclick="showHint(this, 'Look for smaller agencies with specific missions.')">Try: Find Education vs Transportation</span>
                    <span class="viz-chip" onclick="showHint(this, 'See how the top 3 compare to the bottom 50.')">Try: Check Pareto principle</span>
                </div>
                <div class="viz-hint"></div>
                <div class="chart-placeholder-box">
                    <span>[TABLEAU_VIZ_C_URL]</span>
                    <p>Paste Tableau URL here</p>
                </div>
                <p class="guardrail">Interpretation guardrail: Entitlements (mandatory spending) naturally dominate totals.</p>
            </div>

            <!-- VIZ D: AUDIT SIGNALS -->
            <div class="viz-card">
                <div class="viz-header">
                    <div>
                        <h4>D) Audit Signals Overview (FAC)</h4>
                        <p class="viz-desc">Aggregated audit findings from the Federal Audit Clearinghouse.</p>
                    </div>
                    <p class="viz-why">Why it matters: Signals where internal controls might need strengthening.</p>
                </div>
                <div class="viz-chips">
                    <span class="viz-chip" onclick="showHint(this, 'Material Weaknesses are the most severe category.')">Try: Filter by Material Weakness</span>
                    <span class="viz-chip" onclick="showHint(this, 'Recipients with findings in multiple years need review.')">Try: Identify repeat findings</span>
                    <span class="viz-chip" onclick="showHint(this, 'See if findings correlate with specific programs.')">Try: Breakdown by CFDA</span>
                </div>
                <div class="viz-hint"></div>
                <div class="chart-placeholder-box">
                    <span>[TABLEAU_VIZ_D_URL]</span>
                    <p>Paste Tableau URL here</p>
                </div>
                <p class="guardrail">Interpretation guardrail: High finding counts may reflect better transparency, not just worse performance.</p>
            </div>

        </div>
    </section>

    <!-- SECTION 3: LEARN (GLOSSARY) -->
    <section id="learn" class="section">
        <div class="container">
            <h2>Financial Literacy & Context</h2>
            <p style="max-width: 700px; margin-bottom: var(--space-xl);">
                Government data is complex. Use this glossary to understand key terms like "Material Weakness" or "Obligation."
            </p>

            <div class="glossary-controls">
                <input type="text" id="glossarySearch" class="glossary-search" placeholder="Filter terms (e.g., 'audit', 'risk')..." onkeyup="filterGlossary()">
                <div class="glossary-chips" id="glossaryCategories">
                    <!-- Categories injected by JS -->
                </div>
            </div>

            <div id="glossaryList" class="term-grid">
                <!-- Terms injected by JS -->
            </div>
        </div>
    </section>

    <!-- SECTION 4: DATASETS -->
    <section id="datasets" class="section bg-light">
        <div class="container">
            <h2>Datasets & Connections</h2>
            <div class="dataset-grid">
                <!-- FAC -->
                <div class="dataset-card" style="border-top-color: #5B3A8E;">
                    <h4 style="color: #5B3A8E;">Federal Audit Clearinghouse (FAC)</h4>
                    <p style="margin-bottom:12px;">The central repository for single audit reports filed by recipients of federal funds.</p>
                    <ul class="dataset-list">
                        <li><strong>Helps Answer:</strong> Does this entity have recent findings?</li>
                        <li><strong>Helps Answer:</strong> Are there "Material Weaknesses"?</li>
                        <li><strong>Helps Answer:</strong> What is the auditor's opinion?</li>
                    </ul>
                    <p class="dataset-pitfall"><strong>Cannot tell you:</strong> Real-time daily spending.</p>
                    <p class="dataset-pitfall"><strong>Pitfall:</strong> Reporting lags by 9 months or more.</p>
                    <div style="margin-top:auto;">
                        <a href="[DATASET_SOURCE_FAC_LINK]" target="_blank" class="artifact-btn">Go to source</a>
                    </div>
                </div>

                <!-- USAspending -->
                <div class="dataset-card" style="border-top-color: #1F4E79;">
                    <h4 style="color: #1F4E79;">USAspending.gov</h4>
                    <p style="margin-bottom:12px;">The official open data source of federal spending information.</p>
                    <ul class="dataset-list">
                        <li><strong>Helps Answer:</strong> Who received the money?</li>
                        <li><strong>Helps Answer:</strong> How much was obligated?</li>
                        <li><strong>Helps Answer:</strong> Which agency funded it?</li>
                    </ul>
                    <p class="dataset-pitfall"><strong>Cannot tell you:</strong> Whether money was used effectively.</p>
                    <p class="dataset-pitfall"><strong>Pitfall:</strong> 'Obligation' is not 'Outlay'.</p>
                    <div style="margin-top:auto;">
                        <a href="[DATASET_SOURCE_USASPENDING_LINK]" target="_blank" class="artifact-btn">Go to source</a>
                    </div>
                </div>

                <!-- SAM -->
                <div class="dataset-card" style="border-top-color: #6B7280;">
                    <h4 style="color: #6B7280;">SAM.gov (Exclusions)</h4>
                    <p style="margin-bottom:12px;">The primary database for entity registration and exclusions (debarments).</p>
                    <ul class="dataset-list">
                        <li><strong>Helps Answer:</strong> Is this entity debarred?</li>
                        <li><strong>Helps Answer:</strong> What is their UEI?</li>
                        <li><strong>Helps Answer:</strong> Is their registration active?</li>
                    </ul>
                    <p class="dataset-pitfall"><strong>Cannot tell you:</strong> Transaction history.</p>
                    <p class="dataset-pitfall"><strong>Pitfall:</strong> Exclusions often lack UEI fields.</p>
                    <div style="margin-top:auto;">
                        <a href="[DATASET_SOURCE_SAM_LINK]" target="_blank" class="artifact-btn">Go to source</a>
                    </div>
                </div>
            </div>

            <div class="connection-block">
                <h4>How we connect them</h4>
                <div class="join-diagram">FAC auditee_uei &harr; USAspending recipient_uei</div>
                <p><strong>Limitation:</strong> SAM exclusions often lack a structured UEI, so linkage to spending is incomplete and may require name-based fuzzy matching.</p>
            </div>
        </div>
    </section>

    <!-- SECTION 5: CASE STUDIES -->
    <section id="case-studies" class="section">
        <div class="container">
            <h2>Case Studies</h2>
            <div class="case-grid">
                <!-- Case 1 -->
                <div class="case-card">
                    <h4>Case Study 1: Educational Example</h4>
                    <div class="case-subhead">What the data suggests</div>
                    <ul class="case-list">
                        <li>Recipient received significant funding increase in FY2023.</li>
                        <li>Subsequent audit reported a "Material Weakness" in cash management.</li>
                        <li>Reporting package was submitted 3 months late.</li>
                    </ul>
                    <div class="case-subhead">Why it matters</div>
                    <p style="font-size:0.95rem;">Rapid funding growth without scalable controls creates risk.</p>
                    <div class="case-subhead">What to verify next</div>
                    <ul class="case-list">
                        <li>Did the agency resolve the finding in the next audit?</li>
                    </ul>
                    <div style="margin-top:16px;">
                        <a href="[CASE_STUDY_1_TABLEAU_DEEPLINK]" class="cta-button" style="font-size:0.9rem; padding:8px 16px;">Open filtered dashboard</a>
                        <a href="[CASE_STUDY_1_GITHUB_DOCS_LINK]" class="btn-secondary" style="padding:8px 16px; border-radius:4px;">View docs</a>
                    </div>
                    <p class="case-disclaimer">Educational example, not a determination of wrongdoing.</p>
                </div>

                <!-- Case 2 -->
                <div class="case-card">
                    <h4>Case Study 2: Verification Pattern</h4>
                    <div class="case-subhead">What the data suggests</div>
                    <ul class="case-list">
                        <li>Entity flagged in SAM exclusions list (fuzzy match).</li>
                        <li>Continued to receive small awards in subsequent quarters.</li>
                    </ul>
                    <div class="case-subhead">Why it matters</div>
                    <p style="font-size:0.95rem;">Highlights the difficulty of enforcing exclusions without perfect data linkage (UEI).</p>
                    <div class="case-subhead">What to verify next</div>
                    <ul class="case-list">
                        <li>Confirm identity manually (address/legal name).</li>
                    </ul>
                    <div style="margin-top:16px;">
                        <a href="[CASE_STUDY_2_TABLEAU_DEEPLINK]" class="cta-button" style="font-size:0.9rem; padding:8px 16px;">Open filtered dashboard</a>
                        <a href="[CASE_STUDY_2_GITHUB_DOCS_LINK]" class="btn-secondary" style="padding:8px 16px; border-radius:4px;">View docs</a>
                    </div>
                    <p class="case-disclaimer">Educational example, not a determination of wrongdoing.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 6: NEXT STEPS -->
    <section id="next-steps" class="section bg-light">
        <div class="container">
            <h2>Next Steps</h2>
            <div class="next-steps-grid">
                <div class="next-step-col">
                    <h3>3 questions to ask</h3>
                    <ul class="next-step-list">
                        <li>Which agencies provide the most funding to my local area?</li>
                        <li>Do local nonprofits have recent "Clean" audit opinions?</li>
                        <li>Are there repeat findings that haven't been fixed for years?</li>
                    </ul>
                    
                    <h3 style="margin-top:32px;">Try this in 5 minutes</h3>
                    <ul class="next-step-list" style="color:var(--color-text-primary);">
                        <li>1. Search your city in the Tableau dashboard.</li>
                        <li>2. Find one entity with a "Material Weakness".</li>
                        <li>3. Read the definition in the Glossary.</li>
                        <li>4. Check if they have a Corrective Action Plan.</li>
                        <li>5. Share a finding (responsibly) with a colleague.</li>
                    </ul>
                </div>
                
                <div class="next-step-col">
                    <h3>How to engage responsibly</h3>
                    <ul class="next-step-list">
                        <li><strong>Do:</strong> Use data to ask informed questions.</li>
                        <li><strong>Do:</strong> Contextualize findings with funding size.</li>
                        <li><strong>Don't:</strong> Assume every finding means money was stolen.</li>
                        <li><strong>Don't:</strong> Ignore the management response.</li>
                    </ul>

                    <h3 style="margin-top:32px;">Learning Resources</h3>
                    <div class="resource-list">
                        <a href="https://www.cfo.gov/" target="_blank" rel="noopener noreferrer">CFO.gov Resources ‚Üó</a>
                        <a href="https://www.gao.gov/yellowbook" target="_blank" rel="noopener noreferrer">GAO Yellow Book ‚Üó</a>
                        <a href="https://www.whitehouse.gov/omb/management/office-federal-financial-management/" target="_blank" rel="noopener noreferrer">OMB Office of Federal Financial Management ‚Üó</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 7: SOURCES -->
    <section id="sources" class="section">
        <div class="container">
            <h2>Sources & Traceability</h2>
            <div class="dataset-grid">
                <div class="dataset-card">
                    <h5>Official Sources</h5>
                    <ul class="dataset-list" style="margin-bottom:0;">
                        <li><a href="[DATASET_SOURCE_FAC_LINK]" target="_blank" rel="noopener noreferrer">Federal Audit Clearinghouse</a></li>
                        <li><a href="[DATASET_SOURCE_USASPENDING_LINK]" target="_blank" rel="noopener noreferrer">USAspending.gov</a></li>
                        <li><a href="[DATASET_SOURCE_SAM_LINK]" target="_blank" rel="noopener noreferrer">SAM.gov</a></li>
                    </ul>
                </div>
                <div class="dataset-card">
                    <h5>Oversight & Regs</h5>
                    <ul class="dataset-list" style="margin-bottom:0;">
                        <li><a href="https://www.ecfr.gov/current/title-2/subtitle-A/chapter-II/part-200/subpart-F" target="_blank" rel="noopener noreferrer">Uniform Guidance (2 CFR 200)</a></li>
                        <li><a href="https://www.gao.gov/products/gao-05-479" target="_blank" rel="noopener noreferrer">GAO-05-479</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 8: ABOUT & METHODS -->
    <section id="about" class="section bg-light">
        <div class="container">
            <h2>About & Methods</h2>
            <div class="about-grid">
                <div>
                    <h5>What we built</h5>
                    <ul class="next-step-list">
                        <li>A unified view of USAspending and FAC data joined by UEI.</li>
                        <li>Standardized oversight indicators (counts, flags).</li>
                        <li>Educational layers to translate jargon.</li>
                        <li>Interactive visualizations for flow and signal analysis.</li>
                        <li>Proof-of-concept ML models for signal prioritization (prototype).</li>
                    </ul>
                    <div style="margin-top:24px;">
                        <h5>Data Limitations</h5>
                        <p style="font-size:0.9rem;">Linking relies on UEI, which is often missing in SAM exclusion records. Reporting lags mean audit data is often 9+ months old. "Obligation" is a legal promise, not necessarily cash spent (outlay).</p>
                    </div>
                </div>
                <div>
                    <div class="scope-callout" style="margin:0; background:white;">
                        <h5 style="color:#8B2C2C;">Responsible Use</h5>
                        <p style="font-size:0.9rem; margin-bottom:8px;"><strong>Audits ‚â† Fraud:</strong> Findings are procedural signals.</p>
                        <p style="font-size:0.9rem; margin-bottom:8px;"><strong>Scope:</strong> Financial assistance only.</p>
                        <p style="font-size:0.9rem;"><strong>Status:</strong> Educational prototype.</p>
                    </div>
                    <div style="margin-top:24px;">
                        <h5>Appendix Hubs</h5>
                        <a href="[GITHUB_REPO_URL]" target="_blank" class="artifact-btn">Main Repo</a>
                        <a href="[GITHUB_APPENDIX_HUB_URL]" target="_blank" class="artifact-btn">Pipeline Docs</a>
                        <a href="[GITHUB_ML_ARTIFACTS_HUB_LINK]" target="_blank" class="artifact-btn">ML Artifacts</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="brand" style="color:white; border:none; margin-bottom:16px; display:inline-block;">Fiscal Patriots</div>
                    <p style="color:#999; font-size:0.9rem;">Promoting financial literacy and transparency.</p>
                </div>
                <div class="footer-col">
                    <h5>Explore</h5>
                    <a href="#explore">Visualizations</a>
                    <a href="#datasets">Datasets</a>
                    <a href="#case-studies">Case Studies</a>
                </div>
                <div class="footer-col">
                    <h5>Learn</h5>
                    <a href="#learn">Glossary</a>
                    <a href="#about">Methodology</a>
                    <a href="#next-steps">Next Steps</a>
                </div>
                <div class="footer-col">
                    <h5>Connect</h5>
                    <a href="[GITHUB_REPO_URL]" target="_blank" rel="noopener noreferrer">GitHub</a>
                </div>
            </div>
            <div class="disclaimer">
                Educational site. Not legal advice. Not an accusation of wrongdoing.
                <br>&copy; 2026 Fiscal Patriots Team
            </div>
        </div>
    </footer>

    <!-- CHATBOT -->
    <button class="chat-btn" onclick="toggleChat()" aria-label="Ask a question">?</button>
    <div class="chat-panel" id="chatPanel">
        <div class="chat-header">
            <span>Fiscal Assistant</span>
            <button onclick="toggleChat()" style="background:none; border:none; color:white; cursor:pointer; font-size:1.2rem;">&times;</button>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="chat-msg bot">Hello! I'm an educational bot. I can help explain terms like "Material Weakness" or "UEI".</div>
        </div>
        <div class="chat-chips" id="chatChips">
            <!-- Chips injected by JS -->
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" placeholder="Ask a question..." onkeypress="handleChatKey(event)">
            <button onclick="sendUserMessage()" class="cta-button" style="padding:4px 12px; font-size:0.9rem;">Send</button>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        // --- MOBILE MENU ---
        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('mobile-active');
        }

        // --- GLOSSARY DATA & LOGIC ---
        const glossaryTerms = [
            { term: "Audit", cat: "Basics", def: "An independent examination of an entity‚Äôs financial statements, operations, or programs.", why: "Ensures public funds are used as intended." },
            { term: "Auditor", cat: "Basics", def: "An independent professional or oversight body authorized to conduct audits (e.g., GAO, OIG).", why: "Provides an objective view." },
            { term: "Finding", cat: "Findings", def: "A specific problem identified during an audit, such as noncompliance or weak controls.", why: "Signals where oversight is needed." },
            { term: "Material Weakness", cat: "Findings", def: "A severe control failure indicating a reasonable possibility of significant misstatement.", why: "The most serious red flag in an audit." },
            { term: "Corrective Action Plan", cat: "Outcomes", def: "A documented plan describing how an agency will address audit findings.", why: "Shows if management is fixing the problem." },
            { term: "Obligation", cat: "Finance", def: "A binding commitment by the government to spend money (e.g., awarding a grant).", why: "Tracks legal commitments, not just cash flow." },
            { term: "Outlay", cat: "Finance", def: "Actual payments made to satisfy obligations.", why: "Real cash leaving the treasury." },
            { term: "UEI", cat: "Basics", def: "Unique Entity Identifier. The official code for entities doing business with the government.", why: "The key to linking datasets." },
            { term: "Questioned Cost", cat: "Findings", def: "A cost questioned by the auditor because of a finding.", why: "Money potentially misspent." },
            { term: "Single Audit", cat: "Basics", def: "An audit required for non-federal entities expending $750,000+ in federal awards.", why: "The main oversight tool for grants." },
            { term: "Clean Opinion", cat: "Opinions", def: "An unmodified opinion stating financial statements are fairly presented.", why: "The best possible audit outcome." },
            { term: "Adverse Opinion", cat: "Opinions", def: "The auditor concludes statements are materially misstated.", why: "A major warning sign." },
            { term: "Compliance", cat: "Controls", def: "Adherence to laws, regulations, and contractual requirements.", why: "Foundation of trust." },
            { term: "Internal Controls", cat: "Controls", def: "Processes designed to ensure accuracy and prevent fraud.", why: "First line of defense." },
            { term: "Risk Assessment", cat: "Risk", def: "Evaluation of potential events that could negatively affect operations.", why: "Helps prioritize oversight." }
        ];

        let activeCategory = 'All';

        function initGlossary() {
            const list = document.getElementById('glossaryList');
            const catContainer = document.getElementById('glossaryCategories');
            const categories = ['All', ...new Set(glossaryTerms.map(t => t.cat))];
            
            catContainer.innerHTML = categories.map(c => 
                `<span class="glossary-chip ${c === 'All' ? 'active' : ''}" onclick="filterCategory('${c}')">${c}</span>`
            ).join('');
            renderTerms();
        }

        function renderTerms() {
            const list = document.getElementById('glossaryList');
            const searchVal = document.getElementById('glossarySearch').value.toLowerCase();
            const filtered = glossaryTerms.filter(t => {
                const matchesSearch = t.term.toLowerCase().includes(searchVal) || t.def.toLowerCase().includes(searchVal);
                const matchesCat = activeCategory === 'All' || t.cat === activeCategory;
                return matchesSearch && matchesCat;
            });

            list.innerHTML = filtered.map(t => `
                <div class="term-card">
                    <div class="term-header" onclick="this.parentElement.classList.toggle('open')">
                        <span class="term-title">${t.term}</span>
                        <span class="term-cat">${t.cat}</span>
                    </div>
                    <div class="term-body">
                        <p class="term-def">${t.def}</p>
                        <div class="term-why">Why it matters: ${t.why}</div>
                    </div>
                </div>
            `).join('');
        }

        function filterCategory(cat) {
            activeCategory = cat;
            document.querySelectorAll('.glossary-chip').forEach(c => {
                c.classList.toggle('active', c.innerText === cat);
            });
            renderTerms();
        }

        function filterGlossary() { renderTerms(); }

        function handleHeaderSearch(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const term = document.getElementById('headerSearchInput').value;
                document.getElementById('learn').scrollIntoView({behavior: 'smooth'});
                document.getElementById('glossarySearch').value = term;
                filterGlossary();
            }
        }

        // --- INTERACTIVE HINTS ---
        function showHint(el, text) {
            const hintBox = el.parentElement.nextElementSibling;
            hintBox.innerText = "Tip: " + text;
            hintBox.style.display = 'block';
        }

        // --- CHATBOT ---
        const chatChipsData = [
            "What is financial assistance?", "What is a material weakness?", 
            "Does an audit finding mean fraud?", "What is UEI?", "Why can‚Äôt SAM always match?"
        ];
        
        const chatResponses = {
            "financial assistance": "Financial assistance refers to grants and loans to support a public purpose, unlike contracts which buy goods/services for the government. Educational summary only.",
            "material weakness": "A Material Weakness is a severe control failure indicating a reasonable possibility of significant financial misstatement. It is a major red flag. Educational summary only.",
            "fraud": "No. An audit finding is a signal of noncompliance or weak controls. It does not prove fraud; that requires legal investigation. Educational summary only.",
            "uei": "UEI (Unique Entity ID) is the official code for entities doing business with the government. We use it to link datasets. Educational summary only.",
            "sam": "SAM exclusion records often lack a structured UEI field, so we can't perfectly link every debarred entity to their spending history. Educational summary only."
        };

        function toggleChat() {
            const panel = document.getElementById('chatPanel');
            if (panel.classList.contains('open')) {
                panel.classList.remove('open');
            } else {
                panel.classList.add('open');
                if(document.getElementById('chatChips').innerHTML === "") renderChatChips();
            }
        }

        function renderChatChips() {
            const container = document.getElementById('chatChips');
            container.innerHTML = chatChipsData.map(c => 
                `<span class="chat-chip" onclick="askChat('${c}')">${c}</span>`
            ).join('');
        }

        function askChat(text) {
            addMsg(text, 'user');
            setTimeout(() => respondChat(text), 400);
        }

        function sendUserMessage() {
            const input = document.getElementById('chatInput');
            const val = input.value.trim();
            if (val) {
                addMsg(val, 'user');
                input.value = '';
                setTimeout(() => respondChat(val), 400);
            }
        }

        function handleChatKey(e) { if(e.key === 'Enter') sendUserMessage(); }

        function addMsg(text, type) {
            const body = document.getElementById('chatBody');
            const div = document.createElement('div');
            div.className = `chat-msg ${type}`;
            div.innerText = text;
            body.appendChild(div);
            body.scrollTop = body.scrollHeight;
        }

        function respondChat(text) {
            const lower = text.toLowerCase();
            let reply = "I can answer glossary and site questions. Try clicking a suggested question.";
            
            if (lower.includes('financial assistance')) reply = chatResponses['financial assistance'];
            else if (lower.includes('material weakness')) reply = chatResponses['material weakness'];
            else if (lower.includes('fraud')) reply = chatResponses['fraud'];
            else if (lower.includes('uei')) reply = chatResponses['uei'];
            else if (lower.includes('sam')) reply = chatResponses['sam'];
            
            addMsg(reply, 'bot');
        }

        document.addEventListener('DOMContentLoaded', () => { initGlossary(); });

    </script>
</body>
</html>
